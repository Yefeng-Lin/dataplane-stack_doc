# Upstreams for https
upstream ssl_file_server_com {
server 172.16.1.1:8443;
#server 127.0.0.1:8443;
keepalive 1024;
}
# HTTPS reverse proxy and API Gateway
server {
listen 8089 ssl backlog=65535;
root /usr/share/nginx/html;
index index.html index.htm;
server_name $hostname;
ssl_certificate /etc/nginx/cert/nginx_proxy.crt;
ssl_certificate_key /etc/nginx/cert/nginx_proxy.key;
ssl_conf_command Ciphersuites TLS_AES_128_GCM_SHA256;
# Reverse Proxy Path
location / {
limit_except GET {
deny all;
}
proxy_pass https://ssl_file_server_com;
proxy_http_version 1.1;
proxy_set_header Connection "";
proxy_ssl_protocols TLSv1.3;
}
}
